{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.string.sub.js","webpack:///./src/views/order/AddOrder.vue","webpack:///./src/views/order/AddOrder.vue?6154","webpack:///./src/views/order/AddOrder.vue?16b2"],"names":["$","createHTML","forcedStringHTMLMethod","target","proto","forced","sub","this","style","class","role","disabled","value","for","id","type","data-bs-toggle","data-bs-target","aria-expanded","aria-controls","aria-labelledby","data-bs-parent","getUser","createOrder","rows","placeholder","order","title","isNameInput","required","isFileLoaded","name","exp_type","isTypeSelected","object_type","isObjectTypeSelected","docs_cipher","rii_cipher","isShowSections","sections","section","index","key","code","checked","ref","addFile","$event","length","data","formData","FormData","computed","methods","loadSections","get","checkSubsection","filter","alert","append","isFormDataHasItems","post","orderResult","$emit","sectionsWithSub","ev","files","i","values","val","showFormData","console","log","render"],"mappings":"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","file":"js/chunk-d1bd29ae.d9e78e3b.js","sourcesContent":["'use strict';\nvar $ = require('../internals/export');\nvar createHTML = require('../internals/create-html');\nvar forcedStringHTMLMethod = require('../internals/string-html-forced');\n\n// `String.prototype.sub` method\n// https://tc39.es/ecma262/#sec-string.prototype.sub\n$({ target: 'String', proto: true, forced: forcedStringHTMLMethod('sub') }, {\n  sub: function sub() {\n    return createHTML(this, 'sub', '', '');\n  }\n});\n","<template>\r\n\t<div v-if=\"!getUser\" style=\"margin-top: 50px\" class=\"container\">\r\n\t\t<div class=\"alert alert-warning\" role=\"alert\">\r\n\t\t\tДля того, чтобы получить возможность добавлять заказы необходимо\r\n\t\t\tзаключить договор. Далее вам будет предоставлен доступ к системе\r\n\t\t</div>\r\n\t</div>\r\n\t<div class=\"add-project-contaider\" v-else>\r\n\t\t<h2 style=\"text-align: center\">Добавить объект</h2>\r\n\t\t<!-- <hr style=\"width: 90%; margin: 20px auto\" /> -->\r\n\t\t<form class=\"add-project-contaider-colum\" @submit.prevent=\"createOrder\">\r\n\t\t\t<div class=\"project-name\">\r\n\t\t\t\t<h4 style=\"margin-left: 10px;\">Описание</h4>\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tstyle=\"resize: none\"\r\n\t\t\t\t\trows=\"3\"\r\n\t\t\t\t\tplaceholder=\"Введите название проектной документации...\"\r\n\t\t\t\t\tclass=\"form-control form-margin-texarea\"\r\n\t\t\t\t\tv-model=\"order.title\"\r\n\t\t\t\t\t@input=\"isNameInput = true\"\r\n\t\t\t\t\t@emptied=\"isNameInput = false\"\r\n\t\t\t\t\trequired\r\n\t\t\t\t></textarea>\r\n\t\t\t\t<div style=\"margin: 0px -10px 20px 10px\" v-if=\"isNameInput\">\r\n\t\t\t\t\t<label>Заявление на проведение экспертизы</label>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\tclass=\"form-control form-size\"\r\n\t\t\t\t\t\t@change=\"\r\n\t\t\t\t\t\t\tisFileLoaded = true;\r\n\t\t\t\t\t\t\taddFile($event, '0');\r\n\t\t\t\t\t\t\"\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<select\r\n\t\t\t\t\tv-if=\"isFileLoaded\"\r\n\t\t\t\t\tstyle=\"width: 100%\"\r\n\t\t\t\t\tclass=\"accordion-button collapsed form-control form-margin-texarea form-select\"\r\n\t\t\t\t\tname=\"registraistion-name-sex\"\r\n\t\t\t\t\t@change=\"\r\n\t\t\t\t\t\tisTypeSelected = true;\r\n\t\t\t\t\t\tloadSections();\r\n\t\t\t\t\t\"\r\n\t\t\t\t\tv-model=\"order.exp_type\"\r\n\t\t\t\t\trequired\r\n\t\t\t\t>\r\n\t\t\t\t\t<option disabled value=\"0\">Вид экспертизы</option>\r\n\t\t\t\t\t<option value=\"1\"\r\n\t\t\t\t\t\t>Результаты инженерно-экологических изысканий\r\n\t\t\t\t\t\t(РИИ)</option\r\n\t\t\t\t\t>\r\n\t\t\t\t\t<option value=\"2\">Проектная документация (ПД)</option>\r\n\t\t\t\t\t<option value=\"3\">РИИ и ПД</option>\r\n\t\t\t\t</select>\r\n\t\t\t\t<select\r\n\t\t\t\t\tv-if=\"isTypeSelected && order.exp_type != '1'\"\r\n\t\t\t\t\tstyle=\"width: 100%\"\r\n\t\t\t\t\tclass=\"accordion-button collapsed form-control form-margin-texarea form-select\"\r\n\t\t\t\t\tname=\"registraistion-name-sex\"\r\n\t\t\t\t\tv-model=\"order.object_type\"\r\n\t\t\t\t\t@change=\"\r\n\t\t\t\t\t\tisObjectTypeSelected = true;\r\n\t\t\t\t\t\tloadSections();\r\n\t\t\t\t\t\"\r\n\t\t\t\t\trequired\r\n\t\t\t\t>\r\n\t\t\t\t\t<option disabled value=\"0\">Тип объекта</option>\r\n\t\t\t\t\t<option value=\"1\">Объект капитального строительства</option>\r\n\t\t\t\t\t<option value=\"2\">Линейный объект</option>\r\n\t\t\t\t</select>\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tstyle=\"resize: none\"\r\n\t\t\t\t\trows=\"3\"\r\n\t\t\t\t\tv-if=\"isObjectTypeSelected || order.exp_type == '1'\"\r\n\t\t\t\t\tplaceholder=\"Введите шифр проектной документации...\"\r\n\t\t\t\t\tclass=\"form-control form-margin-texarea\"\r\n\t\t\t\t\tv-model=\"order.docs_cipher\"\r\n\t\t\t\t\trequired\r\n\t\t\t\t></textarea>\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tstyle=\"resize: none\"\r\n\t\t\t\t\trows=\"3\"\r\n\t\t\t\t\tv-if=\"isObjectTypeSelected || order.exp_type == '1'\"\r\n\t\t\t\t\tplaceholder=\"Введите шифр РИИ...\"\r\n\t\t\t\t\tclass=\"form-control form-margin-texarea\"\r\n\t\t\t\t\tv-model=\"order.rii_cipher\"\r\n\t\t\t\t\trequired\r\n\t\t\t\t></textarea>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div class=\"add-project-form\" v-if=\"isShowSections\">\r\n\t\t\t\t<h4>Разделы</h4>\r\n\t\t\t\t<div class=\"add-project-checkbox\">\r\n\t\t\t\t\t<div class=\"add-project-checkbox-up\">\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclass=\"add-project-checkbox-up-text\"\r\n\t\t\t\t\t\t\tv-for=\"(section, index) in sections\"\r\n\t\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tv-if=\"!section.sub\"\r\n\t\t\t\t\t\t\t\tclass=\"add-project-checkbox-up-text\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div class=\"add-project-checkbox-text\">\r\n\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\tclass=\"form-check-label\"\r\n\t\t\t\t\t\t\t\t\t\tfor=\"flexCheckChecked\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"form-check-input\"\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t\tid=\"flexCheckChecked\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-model=\"section.checked\"\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t{{ section.code }}\r\n\t\t\t\t\t\t\t\t\t\t{{ section.title }}</label\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div class=\"add-project-input-up\">\r\n\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"form-control form-size\"\r\n\t\t\t\t\t\t\t\t\t\t:disabled=\"!section.checked\"\r\n\t\t\t\t\t\t\t\t\t\t:ref=\"section.code\"\r\n\t\t\t\t\t\t\t\t\t\t@change=\"addFile($event, section.code)\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tclass=\"accordion accordion-flush\"\r\n\t\t\t\t\t\t\t\tid=\"accordionExample\"\r\n\t\t\t\t\t\t\t\tv-else\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<div class=\"accordion-item\">\r\n\t\t\t\t\t\t\t\t\t<h2\r\n\t\t\t\t\t\t\t\t\t\tclass=\"accordion-header\"\r\n\t\t\t\t\t\t\t\t\t\tstyle=\"width: 99.2%; margin: 8px 0\"\r\n\t\t\t\t\t\t\t\t\t\tid=\"headingTwo\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"accordion-button collapsed\"\r\n\t\t\t\t\t\t\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\t\t\t\t\t\t\tdata-bs-toggle=\"collapse\"\r\n\t\t\t\t\t\t\t\t\t\t\tdata-bs-target=\"#collapseTwo\"\r\n\t\t\t\t\t\t\t\t\t\t\taria-expanded=\"false\"\r\n\t\t\t\t\t\t\t\t\t\t\taria-controls=\"collapseTwo\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t{{ section.code }}\r\n\t\t\t\t\t\t\t\t\t\t\t{{ section.title }}\r\n\t\t\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t\t</h2>\r\n\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\tid=\"collapseTwo\"\r\n\t\t\t\t\t\t\t\t\t\tclass=\"accordion-collapse collapse collapse-margin\"\r\n\t\t\t\t\t\t\t\t\t\taria-labelledby=\"headingTwo\"\r\n\t\t\t\t\t\t\t\t\t\tdata-bs-parent=\"#accordionExample\"\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\tclass=\"accordion-body\"\r\n\t\t\t\t\t\t\t\t\t\t\tv-for=\"(sub, index) in section.sub\"\r\n\t\t\t\t\t\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"accordion-body-text\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<label\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"form-check-label\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor=\"flexCheckChecked\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"form-check-input \"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tid=\"flexCheckChecked\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tv-model=\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsub.checked\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ sub.code }}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{{ sub.title }}</label\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</p>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"accordion-body-input\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tname=\"myFile\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tclass=\"form-control form-size\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t:disabled=\"!sub.checked\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t:ref=\"sub.code\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t@change=\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\taddFile(\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t$event,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsub.code,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-if=\"sections.length\" style=\"text-align: center\">\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\tclass=\"btn\"\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tstyle=\"width: 20%; font-weight: bold; background-color: #7DCE94;\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tДобавить\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div v-else style=\"width: 60%; margin: 0 auto;\">\r\n\t\t\t\t\t<div class=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\t\tОшибка при загрузке секций\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t</div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Client, Expert } from '@/components/experts/Experts.vue';\r\nimport { FetchDataProvider } from '@/custom/fetch-data.provider';\r\nimport { defineComponent } from '@vue/runtime-core';\r\nimport { mapGetters } from 'vuex';\r\n\r\nexport interface Order {\r\n\tid: number;\r\n\ttitle: string;\r\n\tdocs_cipher: string;\r\n\trii_cipher: string;\r\n\texp_type: 0 | 1 | 2;\r\n\tobject_type: 0 | 1 | 2;\r\n\tsections: Section[];\r\n\tclient: Client;\r\n\texpert: Expert;\r\n}\r\n\r\nexport interface Section {\r\n\tid: number;\r\n\tcode: string;\r\n\ttitle: string;\r\n\tchecked: boolean;\r\n\tsub: Section[];\r\n\tarrange: string;\r\n\tattach: any;\r\n\tstatus: 'new' | 'taken' | 'done';\r\n}\r\n\r\nexport default defineComponent({\r\n\tname: 'AddProject',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\torder: {\r\n\t\t\t\texp_type: 0,\r\n\t\t\t\tobject_type: 0,\r\n\t\t\t} as Order,\r\n\t\t\tsections: [] as Section[],\r\n\t\t\tformData: new FormData(),\r\n\t\t\tisNameInput: false,\r\n\t\t\tisFileLoaded: false,\r\n\t\t\tisTypeSelected: false,\r\n\t\t\tisObjectTypeSelected: false,\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters(['getUser']),\r\n\t\tisShowSections(): boolean {\r\n\t\t\treturn (\r\n\t\t\t\tthis.isNameInput &&\r\n\t\t\t\tthis.isFileLoaded &&\r\n\t\t\t\tthis.isTypeSelected &&\r\n\t\t\t\t(this.isObjectTypeSelected || this.order.exp_type == 1)\r\n\t\t\t);\r\n\t\t},\r\n\t},\r\n\tmethods: {\r\n\t\tasync loadSections() {\r\n\t\t\tthis.sections = await FetchDataProvider.get(\r\n\t\t\t\t'/order/sections-dict/' +\r\n\t\t\t\t\tthis.order.exp_type +\r\n\t\t\t\t\t'/' +\r\n\t\t\t\t\tthis.order.object_type,\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tasync createOrder() {\r\n\t\t\tthis.checkSubsection();\r\n\r\n\t\t\tconst sections = this.sections.filter(\r\n\t\t\t\t(section: Section) => section.checked,\r\n\t\t\t);\r\n\r\n\t\t\tif (sections.length == 0) {\r\n\t\t\t\talert('Необходимо загрузить хотя бы один раздел!');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.formData.append('0', 'Заявление на проведение экспертизы');\r\n\r\n\t\t\tfor (const section of sections) {\r\n\t\t\t\tif (section.sub) {\r\n\t\t\t\t\tfor (const sub of section.sub) {\r\n\t\t\t\t\t\tthis.formData.append(sub.code, sub.title);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.formData.append(section.code, section.title);\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.isFormDataHasItems(this.formData)) {\r\n\t\t\t\talert('Необходимо выбрать хотя бы один раздел');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst orderResult = await FetchDataProvider.post(\r\n\t\t\t\t'/order',\r\n\t\t\t\tthis.order,\r\n\t\t\t);\r\n\r\n\t\t\tif (!orderResult.id) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst result = await FetchDataProvider.post(\r\n\t\t\t\t'/order/upload-file/' + orderResult.id,\r\n\t\t\t\tthis.formData,\r\n\t\t\t);\r\n\t\t\tthis.formData = new FormData();\r\n\t\t\talert('Проект успешно добавлен');\r\n\t\t\tthis.$emit('add-project', true);\r\n\t\t\tthis.order = {} as Order;\r\n\t\t\tthis.sections = [];\r\n\t\t},\r\n\r\n\t\tcheckSubsection() {\r\n\t\t\tconst sectionsWithSub = this.sections.filter(\r\n\t\t\t\t(section: Section) => section.sub,\r\n\t\t\t);\r\n\t\t\tfor (const section of sectionsWithSub) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tsection.sub.filter((sub: Section) => sub.checked).length > 0\r\n\t\t\t\t) {\r\n\t\t\t\t\tsection.checked = true;\r\n\t\t\t\t\tsection.sub = section.sub.filter(\r\n\t\t\t\t\t\t(sub: Section) => sub.checked,\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsection.checked = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\taddFile(ev: Event, code: string) {\r\n\t\t\tconst target = ev.target as HTMLInputElement;\r\n\t\t\tthis.formData.append(code, target.files![0]);\r\n\t\t},\r\n\r\n\t\tisFormDataHasItems(formData: FormData) {\r\n\t\t\tlet i = 0;\r\n\t\t\tfor (const val of formData.values()) {\r\n\t\t\t\tif (val) i++;\r\n\t\t\t}\r\n\t\t\treturn !!i;\r\n\t\t},\r\n\r\n\t\tshowFormData(formData: FormData) {\r\n\t\t\tfor (const val of formData.values()) {\r\n\t\t\t\tconsole.log(val);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n});\r\n</script>\r\n","\r\nimport { Client, Expert } from '@/components/experts/Experts.vue';\r\nimport { FetchDataProvider } from '@/custom/fetch-data.provider';\r\nimport { defineComponent } from '@vue/runtime-core';\r\nimport { mapGetters } from 'vuex';\r\n\r\nexport interface Order {\r\n\tid: number;\r\n\ttitle: string;\r\n\tdocs_cipher: string;\r\n\trii_cipher: string;\r\n\texp_type: 0 | 1 | 2;\r\n\tobject_type: 0 | 1 | 2;\r\n\tsections: Section[];\r\n\tclient: Client;\r\n\texpert: Expert;\r\n}\r\n\r\nexport interface Section {\r\n\tid: number;\r\n\tcode: string;\r\n\ttitle: string;\r\n\tchecked: boolean;\r\n\tsub: Section[];\r\n\tarrange: string;\r\n\tattach: any;\r\n\tstatus: 'new' | 'taken' | 'done';\r\n}\r\n\r\nexport default defineComponent({\r\n\tname: 'AddProject',\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\torder: {\r\n\t\t\t\texp_type: 0,\r\n\t\t\t\tobject_type: 0,\r\n\t\t\t} as Order,\r\n\t\t\tsections: [] as Section[],\r\n\t\t\tformData: new FormData(),\r\n\t\t\tisNameInput: false,\r\n\t\t\tisFileLoaded: false,\r\n\t\t\tisTypeSelected: false,\r\n\t\t\tisObjectTypeSelected: false,\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t...mapGetters(['getUser']),\r\n\t\tisShowSections(): boolean {\r\n\t\t\treturn (\r\n\t\t\t\tthis.isNameInput &&\r\n\t\t\t\tthis.isFileLoaded &&\r\n\t\t\t\tthis.isTypeSelected &&\r\n\t\t\t\t(this.isObjectTypeSelected || this.order.exp_type == 1)\r\n\t\t\t);\r\n\t\t},\r\n\t},\r\n\tmethods: {\r\n\t\tasync loadSections() {\r\n\t\t\tthis.sections = await FetchDataProvider.get(\r\n\t\t\t\t'/order/sections-dict/' +\r\n\t\t\t\t\tthis.order.exp_type +\r\n\t\t\t\t\t'/' +\r\n\t\t\t\t\tthis.order.object_type,\r\n\t\t\t);\r\n\t\t},\r\n\r\n\t\tasync createOrder() {\r\n\t\t\tthis.checkSubsection();\r\n\r\n\t\t\tconst sections = this.sections.filter(\r\n\t\t\t\t(section: Section) => section.checked,\r\n\t\t\t);\r\n\r\n\t\t\tif (sections.length == 0) {\r\n\t\t\t\talert('Необходимо загрузить хотя бы один раздел!');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.formData.append('0', 'Заявление на проведение экспертизы');\r\n\r\n\t\t\tfor (const section of sections) {\r\n\t\t\t\tif (section.sub) {\r\n\t\t\t\t\tfor (const sub of section.sub) {\r\n\t\t\t\t\t\tthis.formData.append(sub.code, sub.title);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.formData.append(section.code, section.title);\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.isFormDataHasItems(this.formData)) {\r\n\t\t\t\talert('Необходимо выбрать хотя бы один раздел');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst orderResult = await FetchDataProvider.post(\r\n\t\t\t\t'/order',\r\n\t\t\t\tthis.order,\r\n\t\t\t);\r\n\r\n\t\t\tif (!orderResult.id) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst result = await FetchDataProvider.post(\r\n\t\t\t\t'/order/upload-file/' + orderResult.id,\r\n\t\t\t\tthis.formData,\r\n\t\t\t);\r\n\t\t\tthis.formData = new FormData();\r\n\t\t\talert('Проект успешно добавлен');\r\n\t\t\tthis.$emit('add-project', true);\r\n\t\t\tthis.order = {} as Order;\r\n\t\t\tthis.sections = [];\r\n\t\t},\r\n\r\n\t\tcheckSubsection() {\r\n\t\t\tconst sectionsWithSub = this.sections.filter(\r\n\t\t\t\t(section: Section) => section.sub,\r\n\t\t\t);\r\n\t\t\tfor (const section of sectionsWithSub) {\r\n\t\t\t\tif (\r\n\t\t\t\t\tsection.sub.filter((sub: Section) => sub.checked).length > 0\r\n\t\t\t\t) {\r\n\t\t\t\t\tsection.checked = true;\r\n\t\t\t\t\tsection.sub = section.sub.filter(\r\n\t\t\t\t\t\t(sub: Section) => sub.checked,\r\n\t\t\t\t\t);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsection.checked = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\taddFile(ev: Event, code: string) {\r\n\t\t\tconst target = ev.target as HTMLInputElement;\r\n\t\t\tthis.formData.append(code, target.files![0]);\r\n\t\t},\r\n\r\n\t\tisFormDataHasItems(formData: FormData) {\r\n\t\t\tlet i = 0;\r\n\t\t\tfor (const val of formData.values()) {\r\n\t\t\t\tif (val) i++;\r\n\t\t\t}\r\n\t\t\treturn !!i;\r\n\t\t},\r\n\r\n\t\tshowFormData(formData: FormData) {\r\n\t\t\tfor (const val of formData.values()) {\r\n\t\t\t\tconsole.log(val);\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n});\r\n","import { render } from \"./AddOrder.vue?vue&type=template&id=bc6f2f4c\"\nimport script from \"./AddOrder.vue?vue&type=script&lang=ts\"\nexport * from \"./AddOrder.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}